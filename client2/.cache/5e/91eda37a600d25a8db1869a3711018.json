{"id":"node_modules/@colyseus/schema/lib/types/ArraySchema.js","dependencies":[{"name":"/Users/dhruvibakeri/Documents/CS4500/fish/client2/node_modules/@colyseus/schema/lib/types/ArraySchema.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/dhruvibakeri/Documents/CS4500/fish/client2/package.json","includedInParent":true,"mtime":1601631889011},{"name":"/Users/dhruvibakeri/Documents/CS4500/fish/client2/node_modules/@colyseus/schema/package.json","includedInParent":true,"mtime":1601630314618}],"generated":{"js":"\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ArraySchema = void 0;\nvar ArraySchema = /** @class */ (function (_super) {\n    __extends(ArraySchema, _super);\n    function ArraySchema() {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var _this = _super.apply(this, items) || this;\n        Object.setPrototypeOf(_this, Object.create(ArraySchema.prototype));\n        Object.defineProperties(_this, {\n            $sorting: { value: undefined, enumerable: false, writable: true },\n            $changes: { value: undefined, enumerable: false, writable: true },\n            onAdd: { value: undefined, enumerable: false, writable: true },\n            onRemove: { value: undefined, enumerable: false, writable: true },\n            onChange: { value: undefined, enumerable: false, writable: true },\n            triggerAll: {\n                value: function () {\n                    if (!_this.onAdd) {\n                        return;\n                    }\n                    for (var i = 0; i < _this.length; i++) {\n                        _this.onAdd(_this[i], i);\n                    }\n                }\n            },\n            toJSON: {\n                value: function () {\n                    var arr = [];\n                    for (var i = 0; i < _this.length; i++) {\n                        var objAt = _this[i];\n                        arr.push((typeof (objAt.toJSON) === \"function\")\n                            ? objAt.toJSON()\n                            : objAt);\n                    }\n                    return arr;\n                }\n            },\n            clone: {\n                value: function (isDecoding) {\n                    var cloned;\n                    if (isDecoding) {\n                        cloned = ArraySchema.of.apply(ArraySchema, _this);\n                        cloned.onAdd = _this.onAdd;\n                        cloned.onRemove = _this.onRemove;\n                        cloned.onChange = _this.onChange;\n                    }\n                    else {\n                        cloned = new (ArraySchema.bind.apply(ArraySchema, __spreadArrays([void 0], _this.map(function (item) {\n                            if (typeof (item) === \"object\") {\n                                return item.clone();\n                            }\n                            else {\n                                return item;\n                            }\n                        }))))();\n                    }\n                    return cloned;\n                }\n            }\n        });\n        return _this;\n    }\n    Object.defineProperty(ArraySchema, Symbol.species, {\n        get: function () { return ArraySchema; },\n        enumerable: false,\n        configurable: true\n    });\n    ArraySchema.prototype.sort = function (compareFn) {\n        this.$sorting = true;\n        _super.prototype.sort.call(this, compareFn);\n        if (this.$changes) { // allow to .slice() + .sort()\n            var changes = Array.from(this.$changes.changes);\n            for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\n                var key = changes_1[_i];\n                // track index change\n                var previousIndex = this.$changes.getIndex(this[key]);\n                if (previousIndex !== undefined) {\n                    this.$changes.mapIndexChange(this[key], previousIndex);\n                }\n                this.$changes.mapIndex(this[key], key);\n            }\n        }\n        this.$sorting = false;\n        return this;\n    };\n    ArraySchema.prototype.filter = function (callbackfn, thisArg) {\n        var filtered = _super.prototype.filter.call(this, callbackfn);\n        filtered.$changes = this.$changes.clone();\n        return filtered;\n    };\n    ArraySchema.prototype.splice = function (start, deleteCount) {\n        var insert = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            insert[_i - 2] = arguments[_i];\n        }\n        var removedItems = Array.prototype.splice.apply(this, arguments);\n        var movedItems = Array.prototype.filter.call(this, function (item, idx) {\n            return idx >= start + deleteCount - 1;\n        });\n        removedItems.map(function (removedItem) {\n            var $changes = removedItem && removedItem.$changes;\n            // If the removed item is a schema we need to update it.\n            if ($changes && $changes.parent) {\n                $changes.parent.deleteIndex(removedItem);\n                delete $changes.parent;\n            }\n        });\n        movedItems.forEach(function (movedItem) {\n            // If the moved item is a schema we need to update it.\n            var $changes = movedItem && movedItem.$changes;\n            if ($changes) {\n                // Update current index in parent, so subsequent changes in\n                // this item's properties are correctly reflected.\n                $changes.parentField--;\n            }\n        });\n        return removedItems;\n    };\n    return ArraySchema;\n}(Array));\nexports.ArraySchema = ArraySchema;\n"},"sourceMaps":{"js":{"version":3,"file":"ArraySchema.js","sourceRoot":"","sources":["../../src/types/ArraySchema.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"c6323fd5311d577437a971af4427e491","cacheData":{"env":{}}}